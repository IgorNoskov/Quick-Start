{"version":3,"sources":["public-theme-scripts.js"],"names":["$","window","document","undefined","primaryNavigation","siteOverlay","insertAfter","find","each","this","append","on","addClass","removeClass","prev","parent","headerHeight","outerHeight","footerHeight","adminbarHeight","minHeight","innerHeight","css","event","preventDefault","element","postsWrapper","themePostPaginationVars","theme_post_pagination_vars","query","maxPages","parseInt","max_page","moreText","text","currentPage","current_page","theme_vars","i18n","button_loading_text","ajax","url","ajaxurl","data","action","page","type","success","length","hide","show","blur","error","request","textStatus","errorThrown","console","log","jQuery"],"mappings":"AAAA,cASA,SAAAA,EAAAC,EAAAC,EAAAC,GASA,IAAAC,EAAAJ,EAAA,yBAOAK,EAAAL,EAAA,wDAAAM,YAAA,YAOAF,EAAAG,KAAA,2BAAAC,KAAA,WACAR,EAAAS,MAAAC,OAAA,sFAQAN,EAAAG,KAAA,aAAAC,KAAA,WACAR,EAAAS,MAAAC,OAAA,sFAQAV,EAAA,0BAAAW,GAAA,QAAA,WACAP,EAAAQ,SAAA,UACAP,EAAAO,SAAA,yBAQAZ,EAAA,2BAAAW,GAAA,QAAA,WACAP,EAAAS,YAAA,UACAR,EAAAQ,YAAA,yBAQAb,EAAAI,GAAAO,GAAA,QAAA,kBAAA,WACAX,EAAAS,MAAAK,OAAAF,SAAA,YAQAZ,EAAAI,GAAAO,GAAA,QAAA,mBAAA,WACAX,EAAAS,MAAAM,SAAAF,YAAA,YAQAb,EAAAK,GAAAM,GAAA,QAAA,WAEAP,EAAAS,YAAA,UACAT,EAAAG,KAAA,aAAAC,KAAA,WACAR,EAAAS,MAAAI,YAAA,YAGAR,EAAAQ,YAAA,yBAQAb,EAAAC,GAAAU,GAAA,cAAA,WACA,IAAAK,EAAAhB,EAAA,kBAAAiB,aAAA,GACAC,EAAAlB,EAAA,kBAAAiB,aAAA,GACAE,EAAAnB,EAAA,eAAAiB,aAAA,GACAG,EAAApB,EAAAC,GAAAoB,eAAAL,EAAAE,EAAAC,GAAA,KAEAnB,EAAA,mBAAAsB,IAAA,aAAAF,KASApB,EAAA,sCAAAW,GAAA,QAAA,SAAAY,GAEAA,EAAAC,iBAEA,IAAAC,EAAAzB,EAAAS,MACAiB,EAAA1B,EAAA,oBACA2B,EAAA1B,EAAA2B,2BACAC,EAAAF,EAAAE,MACAC,EAAAC,SAAAJ,EAAAK,UACAC,EAAAR,EAAAS,OAEAC,EAAAR,EAAAS,aAEAX,EAAAb,SAAA,cAAAsB,KAAAjC,EAAAoC,WAAAC,KAAAC,qBAEAvC,EAAAwC,KAAA,CACAC,IAAAxC,EAAAoC,WAAAK,QACAC,KAAA,CACAC,OAAA,kBACAf,MAAAA,EACAgB,KAAAV,GAEAW,KAAA,OAEAC,QAAA,SAAAJ,GAEAlB,EAAAZ,YAAA,cAAAqB,KAAAD,GAEA,EAAAU,EAAAK,QACAtB,EAAAhB,OAAAiC,GAGAR,KAEAlC,EAAA2B,2BAAAQ,aAAAD,KAEAL,EACAL,EAAAwB,OAEAxB,EAAAyB,OAAAC,QAIAC,MAAA,SAAAC,EAAAC,EAAAC,GACAC,QAAAC,IAAAJ,GACAG,QAAAC,IAAAH,GACAE,QAAAC,IAAAF,QA3JA,CA+JAG,OAAAzD,OAAAC","file":"public-theme-scripts.min.js","sourcesContent":["'use strict';\n\n/**\r\n * Theme scripts\r\n *\r\n * Creates Mobile menu, ajax-loading posts.\r\n *\r\n * @since 1.0.0\r\n */\n;(function ($, window, document, undefined) {\n    'use strict';\n\n    /**\r\n     * Primary Navigation.\r\n     *\r\n     * @since 1.0.0\r\n     */\n\n    var primaryNavigation = $('#js-primaryNavigation');\n\n    /**\r\n     * Creates and inserts Site Overlay.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    var siteOverlay = $('<div id=\"js-siteOverlay\" class=\"site-overlay\"></div>').insertAfter('#js-site');\n\n    /**\r\n     * Adds button for navigation items with submenu.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    primaryNavigation.find('.menu-item-has-children').each(function () {\n        $(this).append('<button type=\"button\" class=\"menu-item__button js-showSubmenu\">&rsaquo;</button>');\n    });\n\n    /**\r\n     * Adds button for navigation submenus.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    primaryNavigation.find('.sub-menu').each(function () {\n        $(this).append('<button type=\"button\" class=\"sub-menu__button js-closeSubmenu\">&lsaquo;</button>');\n    });\n\n    /**\r\n     * Opens side menu.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    $('#js-buttonOpenSideMenu').on('click', function () {\n        primaryNavigation.addClass('active');\n        siteOverlay.addClass('site-overlay_active');\n    });\n\n    /**\r\n     * Closes side menu.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    $('#js-buttonCloseSideMenu').on('click', function () {\n        primaryNavigation.removeClass('active');\n        siteOverlay.removeClass('site-overlay_active');\n    });\n\n    /**\r\n     * Opens submenu.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    $(primaryNavigation).on('click', '.js-showSubmenu', function () {\n        $(this).prev().addClass('active');\n    });\n\n    /**\r\n     * Closes submenu.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    $(primaryNavigation).on('click', '.js-closeSubmenu', function () {\n        $(this).parent().removeClass('active');\n    });\n\n    /**\r\n     * Clicks on site overlay.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    $(siteOverlay).on('click', function () {\n        // Closes side menu.\n        primaryNavigation.removeClass('active');\n        primaryNavigation.find('.sub-menu').each(function () {\n            $(this).removeClass('active');\n        });\n        // Hides overlay.\n        siteOverlay.removeClass('site-overlay_active');\n    });\n\n    /**\r\n     * Presses footer to the bottom of window.\r\n     *\r\n     * @since 1.0.0\r\n     */\n    $(window).on('load resize', function () {\n        var headerHeight = $('#js-siteHeader').outerHeight(true),\n            footerHeight = $('#js-siteFooter').outerHeight(true),\n            adminbarHeight = $('#wpadminbar').outerHeight(true),\n            minHeight = $(window).innerHeight() - (headerHeight + footerHeight + adminbarHeight) + 'px';\n\n        $('#js-siteContent').css('min-height', minHeight);\n    });\n\n    /**\r\n     * Ajax loads posts.\r\n     *\r\n     * @since 1.0.0\r\n     */\n\n    $('#js-loadMorePosts:not(.is_loading)').on('click', function (event) {\n\n        event.preventDefault();\n\n        var element = $(this),\n            postsWrapper = $('#js-postsWrapper'),\n            themePostPaginationVars = window.theme_post_pagination_vars,\n            query = themePostPaginationVars.query,\n            maxPages = parseInt(themePostPaginationVars.max_page),\n            moreText = element.text();\n\n        var currentPage = themePostPaginationVars.current_page;\n\n        element.addClass('is_loading').text(window.theme_vars.i18n.button_loading_text);\n\n        $.ajax({\n            url: window.theme_vars.ajaxurl,\n            data: {\n                'action': 'load_more_posts',\n                'query': query,\n                'page': currentPage\n            },\n            type: 'POST',\n\n            success: function success(data) {\n\n                element.removeClass('is_loading').text(moreText);\n\n                if (data.length > 0) {\n                    postsWrapper.append(data);\n                }\n\n                currentPage++;\n\n                window.theme_post_pagination_vars.current_page = currentPage;\n\n                if (currentPage === maxPages) {\n                    element.hide();\n                } else {\n                    element.show().blur();\n                }\n            },\n\n            error: function error(request, textStatus, errorThrown) {\n                console.log(request);\n                console.log(textStatus);\n                console.log(errorThrown);\n            }\n        });\n    });\n})(jQuery, window, document);"]}